GIT ?= git
NU ?= nu

TAG := 4.2.0

.PHONY: @all
@all: @raylib

$(VERBOSE).SILENT:

src/raylib.h:
	$(GIT) clone --depth 1 --branch $(TAG) https://github.com/raysan5/raylib
	mv raylib/.gitignore .
	mv raylib/LICENSE .
	mv raylib/src .
	patch -d src < address-glfw-compile-error.patch
	patch -d src < enable-custom-frame-control.patch
	rm -rf raylib

.PHONY: @raylib
@raylib: src/raylib.h

.PHONY: @clean
@clean:
	if [ -f ".gitignore" ]; then rm .gitignore; fi
	if [ -f "LICENSE" ]; then rm LICENSE; fi
	if [ -d "src" ]; then rm -r src; fi
